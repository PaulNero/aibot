# PROJECT M4: AI-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–æ—Å—Ç–æ–≤ –¥–ª—è Telegram

AI-–±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–±–æ—Ä–∞ –Ω–æ–≤–æ—Å—Ç–µ–π, –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ OpenAI –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ Telegram.

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

**–ì–∏–±—Ä–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π:**

### ü§ñ **Telegram Bot API (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)**
- **–§—É–Ω–∫—Ü–∏–∏:** –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≥–æ—Ç–æ–≤—ã—Ö –ø–æ—Å—Ç–æ–≤ –≤ –∫–∞–Ω–∞–ª
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:** Telegram Bot API (–æ—Ç BotFather)
- **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –¢–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

### üîß **–ü–∞—Ä—Å–µ—Ä —Å–∞–π—Ç–æ–≤ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)**
- **–§—É–Ω–∫—Ü–∏–∏:** –°–±–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π —Å –≤–µ–±-—Å–∞–π—Ç–æ–≤
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:** BeautifulSoup + Requests
- **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –ü–∞—Ä—Å–∏–Ω–≥ HTML, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∫–ª–∞–º—ã
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

### üì± **Telethon-–∫–ª–∏–µ–Ω—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**
- **–§—É–Ω–∫—Ü–∏–∏:** –ü–∞—Ä—Å–∏–Ω–≥ –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ Telegram-–∫–∞–Ω–∞–ª–æ–≤
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:** Telethon (Telegram MTProto API)
- **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –ß—Ç–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API –∫–ª—é—á–µ–π

### üîÑ **–ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã:**
1. **–ü–∞—Ä—Å–µ—Ä—ã** (BeautifulSoup/Telethon) —Å–æ–±–∏—Ä–∞—é—Ç –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç)
2. **AI** —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ—Å—Ç—ã —á–µ—Ä–µ–∑ OpenAI
3. **Telegram Bot** –ø—É–±–ª–∏–∫—É–µ—Ç –≥–æ—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤ –∫–∞–Ω–∞–ª

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
poetry install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cp env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ API –∫–ª—é—á–∞–º–∏
```

### 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ñ–∏–∫—Å—Ç—É—Ä
```bash
poetry run python fixtures.py
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram API (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ Telegram-–∫–∞–Ω–∞–ª–æ–≤)
```bash
# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ TELEGRAM_API_ID –∏ TELEGRAM_API_HASH –≤ .env
# –ó–∞—Ç–µ–º –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ Telethon
poetry run python ai_bot/telegram/auth.py
```

### 5. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã (PostgreSQL + Redis + FastAPI + Celery)
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
docker-compose ps

# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏
docker-compose logs -f ai_bot
```

### 6. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (—Ç—Ä–µ–±—É–µ—Ç PostgreSQL –∏ Redis –ª–æ–∫–∞–ª—å–Ω–æ)

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: PostgreSQL (–µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω)
# –¢–µ—Ä–º–∏–Ω–∞–ª 2: Redis
redis-server

# –¢–µ—Ä–º–∏–Ω–∞–ª 3: Celery Worker
poetry run python -m celery -A ai_bot.celery.celery_worker worker --loglevel=info

# –¢–µ—Ä–º–∏–Ω–∞–ª 4: Celery Beat (–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫)
poetry run python -m celery -A ai_bot.celery.celery_worker beat --loglevel=info

# –¢–µ—Ä–º–∏–Ω–∞–ª 5: FastAPI —Å–µ—Ä–≤–µ—Ä
poetry run uvicorn ai_bot.main:app --reload
```

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram

#### **ü§ñ Telegram Bot API (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û - –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏)**

1. **–°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —É [@BotFather](https://t.me/botfather)**
   ```
   /newbot
   –ò–º—è –±–æ—Ç–∞: AI News Publisher
   Username: your_ai_news_bot
   ```
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

2. **–°–æ–∑–¥–∞–π—Ç–µ –∫–∞–Ω–∞–ª –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:**
   - –°–æ–∑–¥–∞–π—Ç–µ –∫–∞–Ω–∞–ª –≤ Telegram
   - –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å –ø—Ä–∞–≤–∞–º–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ username –∫–∞–Ω–∞–ª–∞ (@your_channel)

#### **üì± Telethon (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û - –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ Telegram-–∫–∞–Ω–∞–ª–æ–≤)**

**–í–Ω–∏–º–∞–Ω–∏–µ:** Telethon –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–∞—Ä—Å–∏—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ Telegram-–∫–∞–Ω–∞–ª–æ–≤!

1. **–ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á–∏ –Ω–∞ https://my.telegram.org/**
   - –ó–∞–π–¥–∏—Ç–µ –≤ "API development tools"
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `api_id` –∏ `api_hash`

2. **–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã API –∫–ª—é—á–∏)
poetry run python ai_bot/telegram/auth.py
```

#### **‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ .env:**

```bash
# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: Telegram Bot –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
TELEGRAM_BOT_TOKEN=—Ç–æ–∫–µ–Ω_–æ—Ç_botfather
TELEGRAM_CHANNEL_USERNAME=@username_–∫–∞–Ω–∞–ª–∞

# –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û: Telethon –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ Telegram-–∫–∞–Ω–∞–ª–æ–≤
TELEGRAM_API_ID=–≤–∞—à_api_id
TELEGRAM_API_HASH=–≤–∞—à_api_hash
```

**üîÑ –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã:**
1. **BeautifulSoup** –ø–∞—Ä—Å–∏—Ç —Å–∞–π—Ç—ã (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞)
2. **Telethon** –ø–∞—Ä—Å–∏—Ç Telegram-–∫–∞–Ω–∞–ª—ã (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
3. **AI** –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Å—Ç—ã
4. **Telegram Bot** –ø—É–±–ª–∏–∫—É–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –ø–æ—Å—Ç—ã –≤ –∫–∞–Ω–∞–ª

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 8. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ–π —Ü–µ–ø–æ—á–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
poetry run python test_pipeline.py
```

## üìã –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### ‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:**
- ‚úÖ **–ü–∞—Ä—Å–∏–Ω–≥ —Å–∞–π—Ç–æ–≤** (Habr.com —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π —Ä–µ–∫–ª–∞–º—ã)
- ‚úÖ **AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤** —á–µ—Ä–µ–∑ OpenAI GPT-4
- ‚úÖ **–ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Telegram** —á–µ—Ä–µ–∑ Bot API
- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** —á–µ—Ä–µ–∑ Celery + Redis
- ‚úÖ **REST API** (FastAPI —Å –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π)
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏** (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏)
- ‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º**
- ‚úÖ **–£–º–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∫–ª–∞–º—ã**
- ‚úÖ **Docker —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** (PostgreSQL + Redis)
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** (Celery Beat)

### üîÑ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
- üîÑ **–ü–∞—Ä—Å–∏–Ω–≥ Telegram-–∫–∞–Ω–∞–ª–æ–≤** (Telethon –≥–æ—Ç–æ–≤, –Ω—É–∂–Ω—ã API –∫–ª—é—á–∏ —Å my.telegram.org)
- üîÑ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è Telethon** (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Å—Å–∏–∏)

### üìä **–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: 100%**

### üõ°Ô∏è –£–º–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∫–ª–∞–º—ã

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–µ–∏–≤–∞–µ—Ç —Ä–µ–∫–ª–∞–º–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ –º–Ω–æ–∂–µ—Å—Ç–≤—É –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤:

**–î–ª—è —Å–∞–π—Ç–æ–≤ (Habr):**
- ‚úÖ –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: "—Ä–µ–∫–ª–∞–º–∞", "—Å–ø–æ–Ω—Å–æ—Ä", "–∞–Ω–æ–Ω—Å", "PR", "–≤–∞–∫–∞–Ω—Å–∏—è"
- ‚úÖ –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ —Å–ª–æ–≤–∞: "–∫—É–ø–∏—Ç—å", "—Ü–µ–Ω–∞", "—Å–∫–∏–¥–∫–∞", "–∞–∫—Ü–∏—è", "–ø—Ä–æ–¥–∞–∂–∞"
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–∫–∏ –≤ –í–ï–†–•–ù–ï–ú –†–ï–ì–ò–°–¢–†–ï
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞–∫–∏ (!!!)
- ‚úÖ –ö–æ—Ä–æ—Ç–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (< 10 —Å–∏–º–≤–æ–ª–æ–≤)

**–î–ª—è Telegram (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –∫–æ–¥–µ):**
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–æ–≤
- ‚úÖ Forwarded –ø–æ—Å—Ç—ã –∏–∑ –¥—Ä—É–≥–∏—Ö –∫–∞–Ω–∞–ª–æ–≤
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —ç–º–æ–¥–∑–∏ –≤ –Ω–∞—á–∞–ª–µ (> 3 —ç–º–æ–¥–∑–∏)
- ‚úÖ –°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (< 50 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚úÖ –•—ç—à—Ç–µ–≥–∏: #ad, #sponsored, #—Ä–µ–∫–ª–∞–º–∞, #pr

**–û–±—â–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã:**
- ‚úÖ –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Ç–µ–ª–µ—Ñ–æ–Ω—ã, email)
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –≤ —Ç–µ–∫—Å—Ç–µ
- ‚úÖ –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Å–ª–æ–≤–∞ (—Å–ø–∞–º-–ø–∞—Ç—Ç–µ—Ä–Ω—ã)
- ‚úÖ –ß—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CAPS LOCK

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≤ Docker)

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`:

**PostgreSQL (Docker):**
- `POSTGRES_HOST=postgres`
- `POSTGRES_PORT=5432`
- `POSTGRES_DB=aibot`
- `POSTGRES_USER=postgres`
- `POSTGRES_PASSWORD=postgres`
- `DATABASE_URL=postgresql+psycopg://postgres:postgres@postgres:5432/aibot`

**Telegram Bot (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):**
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –æ—Ç [@BotFather](https://t.me/botfather)
- `TELEGRAM_CHANNEL_USERNAME` - –∫–∞–Ω–∞–ª –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (@username)

**Telegram API (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ Telegram-–∫–∞–Ω–∞–ª–æ–≤):**
- `TELEGRAM_API_ID` - –ø–æ–ª—É—á–∏—Ç—å –Ω–∞ https://my.telegram.org/
- `TELEGRAM_API_HASH` - –ø–æ–ª—É—á–∏—Ç—å –Ω–∞ https://my.telegram.org/

**OpenAI:**
- `OPENAI_API_KEY` - –∫–ª—é—á OpenAI API
- `OPENAI_MODEL=gpt-4o-mini` - –º–æ–¥–µ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**Redis (–æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á):**
- `CELERY_BROKER_URL=redis://redis:6379/0`
- `CELERY_RESULT_BACKEND=redis://redis:6379/0`

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- `PARSE_INTERVAL_MINUTES=30` - –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö
- `DEBUG=true` - —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ:
- **Swagger UI**: `http://localhost:8006/docs`
- **ReDoc**: `http://localhost:8006/redoc`

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | `/api/health/` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞ |
| GET | `/api/stats/` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã |
| GET/POST | `/api/sources/` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –Ω–æ–≤–æ—Å—Ç–µ–π |
| GET/POST | `/api/keywords/` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ |
| GET | `/api/posts/` | –ò—Å—Ç–æ—Ä–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ |
| POST | `/api/generate/` | –†—É—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞ |

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã
curl http://localhost:8006/api/health/

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
curl -L http://localhost:8006/api/stats

# –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫
curl -X POST http://localhost:8006/api/sources/ \
  -H "Content-Type: application/json" \
  -d '{"name": "Habr", "type": "site", "url": "https://habr.com/", "enabled": true}'
```

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ai_bot/
‚îú‚îÄ‚îÄ main.py                    # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ config.py                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Pydantic Settings)
‚îú‚îÄ‚îÄ utils.py                   # –£—Ç–∏–ª–∏—Ç—ã –∏ —Ñ–∏–ª—å—Ç—Ä—ã
‚îú‚îÄ‚îÄ api/                       # REST API
‚îÇ   ‚îú‚îÄ‚îÄ endpoints.py          # –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã FastAPI
‚îÇ   ‚îî‚îÄ‚îÄ schemas.py            # Pydantic —Å—Ö–µ–º—ã
‚îú‚îÄ‚îÄ celery/                   # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ celery_worker.py      # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Celery
‚îÇ   ‚îî‚îÄ‚îÄ tasks.py              # –ó–∞–¥–∞—á–∏ (–ø–∞—Ä—Å–∏–Ω–≥, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è, –ø—É–±–ª–∏–∫–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ db/                       # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ db_manager.py         # –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ models.py             # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ models_utils.py       # –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è –∏ —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ news_parser/             # –ü–∞—Ä—Å–µ—Ä—ã –Ω–æ–≤–æ—Å—Ç–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ sites.py             # –ü–∞—Ä—Å–µ—Ä —Å–∞–π—Ç–æ–≤ (Habr)
‚îÇ   ‚îî‚îÄ‚îÄ telegram.py          # –ü–∞—Ä—Å–µ—Ä Telegram-–∫–∞–Ω–∞–ª–æ–≤
‚îú‚îÄ‚îÄ ai/                      # AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ generator.py         # –õ–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ openai_client.py     # –ö–ª–∏–µ–Ω—Ç OpenAI API
‚îî‚îÄ‚îÄ telegram/                # –†–∞–±–æ—Ç–∞ —Å Telegram
    ‚îú‚îÄ‚îÄ auth.py              # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è Telethon
    ‚îú‚îÄ‚îÄ bot.py               # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –±–æ—Ç–∞
    ‚îî‚îÄ‚îÄ publisher.py         # –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Docker)

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
git clone <repository>
cd ai-telegram-bot

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
cp env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ API –∫–ª—é—á–∞–º–∏

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Docker
docker-compose up -d

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É
curl http://localhost:8006/api/health/
curl -L http://localhost:8006/api/stats

# 5. –û—Ç–∫—Ä—ã—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
open http://localhost:8006/docs
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **–õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**: `docker-compose logs -f ai_bot`
- **–õ–æ–≥–∏ Celery**: `docker-compose logs -f celery-worker`
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: `http://localhost:8006/api/stats`
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `http://localhost:8006/docs`